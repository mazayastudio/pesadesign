<header class="header text-bg-dark navbar navbar-expand-lg bd-navbar sticky-top">
	<nav class="container-xxl bd-gutter flex-wrap flex-lg-nowrap" aria-label="Main Navigation">
		<a href="/" class="navbar-brand">
			<img src="{{ "assets/logo.svg" | relative_url }}" alt="logo" width='50' height='50'>
		</a>
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarNav"
			aria-controls="navbarNav"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse justify-content-center" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item"><a id='' href="/" class="nav-link">Home</a></li>
				<li class="nav-item"><a id='about' href="/about.html" class="nav-link">About</a></li>
				<li class="nav-item dropdown">
					<a id='service' href="/service.html" class="nav-link dropdown-toggle" role='button' data-bs-toggle="dropdown">Services</a>
					<ul class="dropdown-menu">
						<li><a id='our-service' class="dropdown-item" href="/service.html">Our Service</a></li>
						<li><hr class="dropdown-divider"></li>
						<li><a id='pls-tower' class="dropdown-item" href="/pls-tower.html">PLS Tower</a></li>
						<li><a id='pls-cadd' class="dropdown-item" href="/pls-cadd.html">PLS CADD</a></li>
						<li><a id='pls-pole' class="dropdown-item" href="/pls-pole.html">PLS Pole</a></li>
					</ul>
				</li>
				<li class="nav-item"><a id='contact' href="/contact.html" class="nav-link">Contact</a></li>
				<li class="nav-item"><a id='blog' href="/blog.html" class="nav-link">Blog</a></li>
				<li class="nav-item"><a id='pricing' href="/pricing.html" class="nav-link">Pricing</a></li>
			</ul>
			<hr>
			<div class="navbar-nav flex-row flex-wrap mt-3 d-flex d-lg-none ms-md-auto">
				<div class="nav-item dropdown">
					<div class="mode-switch">
						<button class="btn btn-sm btn-default text-secondary" id="dark" title="Use dark mode">
							<i class="bi bi-moon"></i>
						</button>
						<button class="btn btn-sm btn-default text-secondary" id="light" title="Use light mode">
							<i class="bi bi-sun"></i>
						</button>
						<button class="btn btn-sm btn-default text-secondary" id="system" title="Use system preferred mode">
							<i class="bi bi-display"></i>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="navbar-nav flex-row flex-wrap d-none d-lg-flex ms-md-auto">
			<div class="nav-item dropdown">
				<div class="mode-switch">
					<button class="btn btn-sm btn-default text-secondary" id="dark" title="Use dark mode" onclick='dark()'>
						<i class="bi bi-moon"></i>
					</button>
					<button class="btn btn-sm btn-default text-secondary" id="light" title="Use light mode" onclick='light()'>
						<i class="bi bi-sun"></i>
					</button>
					<button class="btn btn-sm btn-default text-secondary" id="system" title="Use system preferred mode" onclick='setMode()'>
						<i class="bi bi-display"></i>
					</button>
				</div>
			</div>
		</div>
	</nav>
</header>

<script defer>
		function getMode() {
			return localStorage.getItem('bs-theme') || 'system';
		}

		function getSystemMode() {
			if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
				return 'dark';
			} else {
				return 'light';
			}
		}

		function dark() {
			document.querySelector('.header').classList.remove('text-bg-light');
			document.querySelector('.header').classList.add('text-bg-dark');
			document.querySelector('.content').classList.remove('text-bg-light');
			document.querySelector('.content').classList.add('text-bg-dark');
		}

		function light() {
			document.querySelector('.header').classList.remove('text-bg-dark');
			document.querySelector('.header').classList.add('text-bg-light');
			document.querySelector('.content').classList.remove('text-bg-dark');
			document.querySelector('.content').classList.add('text-bg-light');
		}

		function setMode() {
			const currentMode = getMode();
			const systemMode = getSystemMode();
			switch (currentMode) {
				case 'dark':
					dark();
					break;
				case 'light':
					light();
					break;
				case 'system':
					if (systemMode === 'dark') {
						dark();
					} else {
						light();
					}
					break;
			}
		}
		// const darkButton = document.getElementById('dark');
		// console.log(darkButton);

		// darkButton.addEventListener('click', () => console.log('Dark mode'));
		// document.getElementById('light').addEventListener('click', setMode);
		// document.getElementById('system').addEventListener('click', setMode);
</script>
<script>
	document.addEventListener('DOMContentLoaded', function() {
		var path = window.location.pathname;
		var navLinks = document.querySelectorAll('.nav-link, .dropdown-item');

		navLinks.forEach(function(link) {
			if (link.getAttribute('href') === path) {
				link.classList.add('active');
				var parentDropdown = link.closest('.dropdown');
				if (parentDropdown) {
					parentDropdown.querySelector('.nav-link').classList.add('active');
				}
			}
		});
	});
</script>